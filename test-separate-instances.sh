#!/bin/bash

echo "ğŸ”§ Testing Separate WSO2 IS and FIDO App Instances"
echo "=================================================="
echo ""
echo "ğŸ“‹ Configuration:"
echo "   âœ… WSO2 IS: https://ndanh.site:9443"
echo "   âœ… FIDO App: https://fido.18.143.154.126.nip.io"
echo "   âœ… FIDO App connects to external WSO2 IS"
echo ""
echo "ğŸš€ To run FIDO app with separate WSO2 IS:"
echo ""
echo "1. Start FIDO app only:"
echo "   docker-compose -f docker-compose-fido-only.yml up -d"
echo ""
echo "2. Check FIDO app status:"
echo "   docker-compose -f docker-compose-fido-only.yml ps"
echo ""
echo "3. Check FIDO app logs:"
echo "   docker-compose -f docker-compose-fido-only.yml logs -f fido-app"
echo ""
echo "4. Test FIDO app:"
echo "   - Access: https://fido.18.143.154.126.nip.io"
echo "   - Try native authentication"
echo "   - Should connect to WSO2 IS at ndanh.site:9443"
echo ""
echo "ğŸ”§ Configuration files updated:"
echo "   âœ… application.properties - WSO2 IS URL updated"
echo "   âœ… application-docker.properties - WSO2 IS URL updated"
echo "   âœ… docker-compose-fido-only.yml - Standalone FIDO app"
echo "   âœ… FIDO app image rebuilt and pushed"
echo ""
echo "ğŸ“ Important notes:"
echo "   - WSO2 IS must be running on ndanh.site:9443"
echo "   - WSO2 IS must have correct Service Provider configuration"
echo "   - Service Provider 'FIDO_POC_App' must be configured with:"
echo "     - Relying Party ID: fido.18.143.154.126.nip.io"
echo "     - App ID: https://fido.18.143.154.126.nip.io"
echo "     - Trusted Origins: ndanh.site, fido.18.143.154.126.nip.io"
echo ""
echo "ğŸ¯ Expected behavior:"
echo "   âœ… FIDO app connects to external WSO2 IS"
echo "   âœ… Native authentication works"
echo "   âœ… FIDO registration and authentication work"
echo "   âœ… No more rpId issues"
echo ""
echo "âœ… Ready to test separate instances setup!"

