#!/bin/bash

echo "üîß Testing Updated WSO2 IS URL (No Port)"
echo "========================================"
echo ""
echo "üìã Configuration updated:"
echo "   ‚úÖ WSO2 IS URL: https://ndanh.site (no port)"
echo "   ‚úÖ FIDO App URL: https://fido.18.143.154.126.nip.io"
echo "   ‚úÖ FIDO App image rebuilt and pushed"
echo ""
echo "üöÄ To test the updated configuration:"
echo ""
echo "1. Start FIDO app:"
echo "   docker-compose -f docker-compose-fido-only.yml up -d"
echo ""
echo "2. Check FIDO app status:"
echo "   docker-compose -f docker-compose-fido-only.yml ps"
echo ""
echo "3. Check FIDO app logs:"
echo "   docker-compose -f docker-compose-fido-only.yml logs -f fido-app"
echo ""
echo "4. Test FIDO app:"
echo "   - Access: https://fido.18.143.154.126.nip.io"
echo "   - Try native authentication"
echo "   - Should connect to WSO2 IS at https://ndanh.site"
echo ""
echo "üîß Files updated:"
echo "   ‚úÖ application.properties - WSO2 IS URL without port"
echo "   ‚úÖ application-docker.properties - WSO2 IS URL without port"
echo "   ‚úÖ docker-compose-fido-only.yml - WSO2 IS URL without port"
echo "   ‚úÖ FIDO app image rebuilt and pushed"
echo ""
echo "üìù Important notes:"
echo "   - WSO2 IS must be running on https://ndanh.site"
echo "   - WSO2 IS must have correct Service Provider configuration"
echo "   - Service Provider 'FIDO_POC_App' must be configured with:"
echo "     - Relying Party ID: fido.18.143.154.126.nip.io"
echo "     - App ID: https://fido.18.143.154.126.nip.io"
echo "     - Trusted Origins: ndanh.site, fido.18.143.154.126.nip.io"
echo ""
echo "üéØ Expected behavior:"
echo "   ‚úÖ FIDO app connects to WSO2 IS without port"
echo "   ‚úÖ Native authentication works"
echo "   ‚úÖ FIDO registration and authentication work"
echo "   ‚úÖ No more rpId issues"
echo ""
echo "‚úÖ Ready to test with updated WSO2 IS URL!"

