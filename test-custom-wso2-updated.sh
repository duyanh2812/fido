#!/bin/bash

echo "ğŸ¯ Testing Updated Custom WSO2 IS Image"
echo "======================================"
echo ""
echo "ğŸ“‹ What was updated:"
echo "   âœ… Copied all configs from your local WSO2 IS"
echo "   âœ… Updated deployment-aws.toml with nip.io domains"
echo "   âœ… Rebuilt custom WSO2 IS image with latest data"
echo "   âœ… Updated docker-compose.yml to use custom image"
echo ""
echo "ğŸ”§ Custom WSO2 IS Image Features:"
echo "   âœ… All your localhost WSO2 IS configurations"
echo "   âœ… Service Provider: FIDO_POC_App (pre-configured)"
echo "   âœ… OAuth2 Client: jDsWosgzDKXGRUPHXhLnlm1wQQ8a"
echo "   âœ… FIDO2 settings with nip.io domains"
echo "   âœ… CORS configuration for nip.io domains"
echo "   âœ… All your custom users and data"
echo ""
echo "ğŸ“¦ Images being used:"
echo "   - WSO2 IS: ngoduyanh/wso2is-custom-permission-fixed:latest"
echo "   - FIDO App: ngoduyanh/fido-app:latest"
echo ""
echo "ğŸš€ To test with updated custom WSO2 IS:"
echo "   1. Pull latest images:"
echo "      docker-compose pull"
echo ""
echo "   2. Start services:"
echo "      docker-compose up -d"
echo ""
echo "   3. Access WSO2 IS Console:"
echo "      https://wso2.18.143.154.126.nip.io:9443/carbon"
echo "      Username: admin"
echo "      Password: admin"
echo ""
echo "   4. Test FIDO App:"
echo "      https://fido.18.143.154.126.nip.io"
echo "      - Should work with pre-configured Service Provider"
echo "      - No manual configuration needed"
echo ""
echo "ğŸ‰ Benefits of using custom WSO2 IS image:"
echo "   âœ… No manual configuration required"
echo "   âœ… All your localhost data preserved"
echo "   âœ… Service Provider already configured"
echo "   âœ… FIDO2 settings already set up"
echo "   âœ… Ready to use immediately"
echo ""
echo "ğŸ” Expected behavior:"
echo "   âœ… Native authentication should work without errors"
echo "   âœ… No callback URL mismatch errors"
echo "   âœ… FIDO registration and authentication should work"
echo "   âœ… All your custom configurations preserved"


